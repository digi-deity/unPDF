[build-system]
requires = ["setuptools", "Cython"]
build-backend = "setuptools.build_meta"

[project]
name = 'pdf-extract'
version = "1.0.0"
requires-python = ">= 3.9"
dependencies = [
    "numpy",
]

[tool.setuptools.packages.find]
include = ["pdfextract"]

[tool.setuptools.exclude-package-data]
pdfextract = ["*.c", "*.pxd", "*.pyx"]

[tool.cibuildwheel]
#test-command = "DYLD_LIBRARY_PATH=$REPAIR_LIBRARY_PATH pytest {project}/tests"
linux.repair-wheel-command = ""
test-requires = "pytest"
linux.archs = ["x86_64", "aarch64"]
windows.archs = ["AMD64", "x86", "ARM64"]
# macos.archs = ["arm64"] # Don't know how to fix issues with arm64
#manylinux-aarch64-image = "quay.io/pypa/manylinux2014_aarch64:2025.02.02-1"  # For same reason 2024 default segfaults
#macos.environment = {REPAIR_LIBRARY_PATH = "lib/pdfium/lib/"}
#macos.repair-wheel-command = "DYLD_LIBRARY_PATH=$REPAIR_LIBRARY_PATH delocate-wheel --require-archs {delocate_archs} -w {dest_dir} -v {wheel}"
